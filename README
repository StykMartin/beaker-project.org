
This is the beaker-project.org web site.

Note that many parts of this web site are generated from elsewhere:

    * Some .html pages are generated from the corresponding .txt file in
      Markdown using Pandoc.
    * Some documentation is built using Sphinx from docstrings extracted
      from Beaker code.
    * Some shell scripts have a pretty documented version which is
      generated by shocco.

This repository uses a git submodule to include the master branch of Beaker's 
source tree under the beaker/ subdirectory. On first checkout you should 
initialise the submodule by running:

    git submodule init

and subsequently update it by running:

    git submodule update

Alternatively, if you already have a clone of Beaker git you can use it instead 
by passing the BEAKER variable to make. Use this mechanism if you want to test 
building the web site against your local modifications in Beaker's source tree.

    make BEAKER=../beaker


Publishing the web site
-----------------------

These instructions are only relevant to Beaker developers who have
access to publish to beaker-project.org.

Only publish changes that are already on the master branch. Make sure
your master branch is up to date:

    git checkout master
    git pull

If the master branch of Beaker has moved on (because a new version of Beaker 
has been released), update the submodule reference:

    cd beaker
    git pull origin master
    cd ..
    git add -u beaker
    git commit -m 'update beaker submodule'

Build your changes:

    ./publish.sh

Now the 'published' branch has been updated. First, check that the 
changes you've introduced look sane:

    git diff published~..published

Then you can push to http://stage.beaker-project.org/ and check 
everything looks okay:

    git push beaker-project.org:/srv/www/stage.beaker-project.org/git/ published:master

If something is not right, fix it, commit your fix, and re-run 
publish.sh. Once you're happy with it, push it live:

    git push beaker-project.org:/srv/www/beaker-project.org/git/ published:master
